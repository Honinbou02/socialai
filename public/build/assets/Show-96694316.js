import{G as y,y as N,h as v,o as h,i as C,j as M,c as x,r as U,b as e,a as u,t as d,F as $,u as t,l as S,w as I,e as D,d as g,v as V,f as T,k,g as E,p as a,a3 as j}from"./app-eeb1ee89.js";import{_ as q}from"./AdminLayout-7bd67f05.js";import{l as O}from"./vue-draggable-plus-5145140d.js";import{_ as L}from"./PageHeader-8760edd0.js";import{t as A}from"./toastComposable-88b306f2.js";import"./dropdown-45d66330.js";const n=y({contents:[],contentId:null,isEdit:!1,newItem:y({id:null,text:"",icon:"",href:"",target:"_self",title:"",children:[]}),addNewItem(){if(this.newItem.text){this.newItem.id=Math.floor(Math.random()*Date.now()).toString(36);const s=JSON.parse(JSON.stringify(this.newItem));this.contents.push(s),this.resetItem()}},editItem(){this.isEdit=!0;const s=this.findItemById(this.contents,this.contentId);s&&(this.newItem={...s})},updateItem(){const s=this.findItemById(this.contents,this.newItem.id);s&&this.newItem.text&&(Object.assign(s,this.newItem),this.resetItem(),this.isEdit=!1)},removeItemById(s,c){for(let o=0;o<s.length;o++){if(s[o].id===c){s.splice(o,1);return}s[o].children&&s[o].children.length>0&&this.removeItemById(s[o].children,c)}},removeItem(){this.removeItemById(this.contents,this.contentId)},resetItem(){setTimeout(()=>{this.newItem={id:null,text:"",icon:"",href:"",target:"_self",title:"",children:[]}},500)},findItemById(s,c){for(const o of s){if(o.id===c)return o;if(o.children&&o.children.length>0){const m=this.findItemById(o.children,c);if(m)return m}}return null}}),F={class:"flex items-center justify-between rounded border p-2 dark:border-gray-600"},J={class:"flex cursor-move items-center gap-2"},R={class:"flex gap-4"},G=["onClick"],z=["onClick"],H={__name:"NestedDraggable",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(s,{emit:c}){const o=s,m=c,l=N({get:()=>o.modelValue,set:p=>m("update:modelValue",p)}),f=p=>{n.contentId=p,n.removeItem()},i=p=>{n.contentId=p,n.editItem()};return(p,w)=>{const _=v("Icon"),B=v("NestedDraggable",!0);return h(),C(t(O),{class:"drag-area",tag:"ul",modelValue:l.value,"onUpdate:modelValue":w[0]||(w[0]=r=>l.value=r),group:"g1"},{default:M(()=>[(h(!0),x($,null,U(s.modelValue,r=>(h(),x("li",{key:r.id},[e("div",F,[e("p",J,[u(_,{icon:"bx:move",class:"text-lg"}),e("span",null,d(r.text),1)]),e("div",R,[e("button",{onClick:b=>i(r.id)},[u(_,{icon:"bx:pencil",class:"text-lg hover:text-blue-400"})],8,G),e("button",{onClick:b=>f(r.id)},[u(_,{icon:"bx:trash",class:"text-lg hover:text-red-400"})],8,z)])]),u(B,{modelValue:r.children,"onUpdate:modelValue":b=>r.children=b},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},8,["modelValue"])}}},K={class:"container p-4 sm:p-6"},P={class:"grid grid-cols-1 place-items-start gap-6 lg:grid-cols-12"},Q={class:"card col-span-1 lg:col-span-9"},W={class:"card-body"},X={class:"mb-8 flex items-center justify-between"},Y={class:"col-span-1 w-full lg:col-span-3"},Z={class:"card-body card"},ee={class:"mb-5"},te={class:"space-y-6"},se={for:"text",class:"label label-required"},ne={for:"href",class:"label label-required"},oe={for:"target",class:"label label-required"},le={value:"_self"},ie={value:"_blank"},ae={value:"_top"},de={class:"menu-add-update mt-6 flex"},ce=["disabled"],re=["disabled"],me=E({layout:q}),Ie=Object.assign(me,{__name:"Show",props:["info","contents","segments","buttons"],setup(s){const c=s;S(()=>{n.contents=c.contents});const o=()=>{j.patch(route("admin.menu.data.update",c.info.id),{data:n.contents}).then(m=>{m.status==200&&A.success(a("Menu item has been updated successfully"))})};return(m,l)=>{const f=v("Icon");return h(),x("main",K,[u(L,{title:t(a)("Manage Menu"),buttons:s.buttons},null,8,["title","buttons"]),e("div",P,[e("div",Q,[e("div",W,[e("div",X,[e("h4",null,d(t(a)("Menu Items")),1),e("button",{type:"button",id:"form-button",class:"btn btn-success",onClick:I(o,["prevent"])},d(t(a)("Save")),1)]),e("div",null,[c.contents?(h(),C(H,{key:0,modelValue:t(n).contents,"onUpdate:modelValue":l[0]||(l[0]=i=>t(n).contents=i)},null,8,["modelValue"])):D("",!0)])])]),e("div",Y,[e("div",Z,[e("h4",ee,d(t(a)("Create Menu Items")),1),e("form",te,[e("div",null,[e("label",se,d(t(a)("Text")),1),g(e("input",{type:"text",class:"input",name:"text",id:"text",placeholder:"Text",autocomplete:"off","onUpdate:modelValue":l[1]||(l[1]=i=>t(n).newItem.text=i)},null,512),[[V,t(n).newItem.text]])]),e("div",null,[e("label",ne,d(t(a)("URL")),1),g(e("input",{type:"text",class:"input",id:"href",name:"href",placeholder:"URL",required:"",autocomplete:"off","onUpdate:modelValue":l[2]||(l[2]=i=>t(n).newItem.href=i)},null,512),[[V,t(n).newItem.href]])]),e("div",null,[e("label",oe,d(t(a)("Target")),1),g(e("select",{name:"target",class:"input","onUpdate:modelValue":l[3]||(l[3]=i=>t(n).newItem.target=i)},[e("option",le,d(t(a)("Self")),1),e("option",ie,d(t(a)("Blank")),1),e("option",ae,d(t(a)("Top")),1)],512),[[T,t(n).newItem.target]])])]),e("div",de,[e("button",{type:"button",id:"btnUpdate",class:"btn btn-update btn-warning mr-2 flex-1 text-white",onClick:l[4]||(l[4]=I((...i)=>t(n).updateItem&&t(n).updateItem(...i),["prevent"])),disabled:!t(n).isEdit},[u(f,{icon:"mdi:content-save"}),k(" "+d(t(a)("Update")),1)],8,ce),e("button",{type:"button",id:"btnAdd",onClick:l[5]||(l[5]=I((...i)=>t(n).addNewItem&&t(n).addNewItem(...i),["prevent"])),class:"btn btn-success flex-1",disabled:t(n).isEdit},[u(f,{icon:"mdi:plus"}),k(" "+d(t(a)("Add")),1)],8,re)])])])])])}}});export{Ie as default};
