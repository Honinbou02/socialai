import{l as $,y as Y,T as N,h as k,o as n,c as d,b as t,a as c,t as o,u as e,F as m,r as h,i as E,w as I,d as u,v,k as w,e as f,f as y,g as L,p as l,n as B,j as T}from"./app-eeb1ee89.js";import{h as x}from"./moment-a9aaa855.js";import{_ as j}from"./NoDataFound-fb4d7f40.js";import F from"./OverviewGrid-d8be46f6.js";import{_ as z}from"./Paginate-2104b717.js";import{_ as G}from"./SpinnerBtn-cd909105.js";import{s as R}from"./sharedComposable-624eb874.js";import{_ as O}from"./AdminLayout-7bd67f05.js";import{_ as q}from"./PageHeader-8760edd0.js";import{d as g}from"./drawer-fe4c5e1a.js";import"./toastComposable-88b306f2.js";import"./actionModalComposable-f268749a.js";import"./dropdown-45d66330.js";const H={class:"container p-4 sm:p-6"},J={class:"space-y-6"},K={class:"table-responsive whitespace-nowrap rounded-primary"},Q={class:"table"},W={class:"text-end"},X={key:0},Z={class:"text-left"},tt={class:"flex gap-2"},st=["src"],et=["href"],at={class:"font-bold"},ot={key:0,class:"badge badge-primary"},lt={class:"text-left"},nt={class:""},it={class:"dropdown","data-placement":"bottom-start"},dt={class:"dropdown-toggle"},rt={class:"dropdown-content w-40"},ct={class:"dropdown-list"},_t={class:"dropdown-list-item"},mt={class:"dropdown-list-item"},ut=["onClick"],pt={class:"dropdown-list-item"},ht=["onClick"],bt={id:"editUserDrawer",class:"drawer drawer-right"},vt={class:"drawer-header"},wt={type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},ft={class:"drawer-body"},yt={class:"mb-2"},gt=t("label",null,"Name",-1),kt={class:"mb-2"},xt={key:0,class:"text-xs"},Ut=["disabled"],Ct={class:"mb-2"},St={key:0,class:"text-xs"},Vt=["disabled"],At={class:"mb-2"},Mt={class:"label mb-2"},Dt=t("option",{value:""},"Select Plan",-1),Pt=["value"],$t={class:"mb-2"},Yt={class:"label mb-2"},Nt=t("option",{value:""},"Select Payment Gateway",-1),Et=["value"],It={key:0,class:"mb-2"},Lt={class:"label mb-2"},Bt=["value"],Tt={class:"drawer-footer"},jt={class:"flex gap-2"},Ft={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},zt=L({layout:O}),es=Object.assign(zt,{__name:"Index",props:["users","plans","gateways","segments","activeUsers","inactiveUsers","totalUsers"],setup(_){const{deleteRow:U,formatCurrency:C,uiAvatar:S}=R();$(()=>{g.init()});const b=_,V=Y(()=>[{value:b.totalUsers,title:l("Total Users"),iconClass:"bx:badge"},{value:b.activeUsers,title:l("Active Users"),iconClass:"bx:badge-check"},{value:b.inactiveUsers,title:l("Inactive Users"),iconClass:"bx:x-circle"}]),a=N({user_id:null,name:"",email:"",plan_id:"",gateway_id:"",payment_status:1,password:"",provider_id:""}),A=r=>{a.reset(),a.user_id=r.id,a.name=r.name,a.email=r.email,a.plan_id=r.plan_id??"",a.password="",a.provider_id=r.provider_id??"",r.plan_id&&(a.gateway_id=r.gateway_id,a.payment_status=r.payment_status),g.of("#editUserDrawer").show()},M=()=>{a.put(route("admin.users.update",a.user_id),{onSuccess:()=>{a.reset(),g.of("#editUserDrawer").hide()}})};return(r,i)=>{const p=k("Icon"),D=k("Link");return n(),d(m,null,[t("main",H,[c(q,{title:"Users"}),t("div",J,[c(F,{items:V.value,grid:"3"},null,8,["items"]),t("div",K,[t("table",Q,[t("thead",null,[t("tr",null,[t("th",null,o(e(l)("User")),1),t("th",null,o(e(l)("Credits")),1),t("th",null,o(e(l)("Plan")),1),t("th",null,o(e(l)("Expire At")),1),t("th",null,o(e(l)("Status")),1),t("th",null,o(e(l)("Created At")),1),t("th",null,[t("div",W,o(e(l)("Action")),1)])])]),_.users.total?(n(),d("tbody",X,[(n(!0),d(m,null,h(_.users.data,s=>(n(),d("tr",{key:s.id},[t("td",Z,[t("div",tt,[t("img",{class:"mr-1 inline w-12 rounded-full",src:e(S)(s.name,s.avatar),alt:"preview"},null,8,st),t("a",{href:r.route("admin.users.show",s.id)},[t("p",at,o(s.name),1),t("p",null,o(s.email),1)],8,et)])]),t("td",null,o(s.credits),1),t("td",null,[s.plan?(n(),d("span",ot,o(s.plan.title),1)):(n(),d(m,{key:1},[w(" N/A ")],64))]),t("td",null,o(s.will_expire?e(x)(s.will_expire).format("D MMM, YYYY h:mm A"):"N/A"),1),t("td",lt,[t("span",{class:B(["badge",s.status==1?"badge-success":"badge-danger"])},o(s.status==1?e(l)("Active"):e(l)("Inactive")),3)]),t("td",null,o(e(x)(s.created_at).format("D MMM, YYYY h:mm A")),1),t("td",nt,[t("div",it,[t("div",dt,[c(p,{class:"text-2xl",icon:"bx:dots-horizontal-rounded"})]),t("div",rt,[t("ul",ct,[t("li",_t,[c(D,{href:r.route("admin.users.show",s),class:"dropdown-link"},{default:T(()=>[c(p,{icon:"fe:eye"}),t("span",null,o(e(l)("View")),1)]),_:2},1032,["href"])]),t("li",mt,[t("button",{onClick:P=>A(s),class:"dropdown-link"},[c(p,{icon:"fe:edit"}),t("span",null,o(e(l)("Edit")),1)],8,ut)]),t("li",pt,[t("button",{as:"button",class:"dropdown-link",onClick:P=>e(U)(r.route("admin.users.destroy",s.id))},[c(p,{icon:"fe:trash"}),t("span",null,o(e(l)("Delete")),1)],8,ht)])])])])])]))),128))])):(n(),E(j,{key:1,"for-table":"true"}))]),c(z,{links:_.users.links},null,8,["links"])])])]),t("div",bt,[t("form",{onSubmit:i[6]||(i[6]=I(s=>M(),["prevent"]))},[t("div",vt,[t("h5",null,o(e(l)("Edit User Information")),1),t("button",wt,[c(p,{class:"text-xl",icon:"mdi:close"})])]),t("div",ft,[t("div",yt,[gt,u(t("input",{type:"text",class:"input",disabled:"","onUpdate:modelValue":i[0]||(i[0]=s=>e(a).name=s)},null,512),[[v,e(a).name]])]),t("div",kt,[t("label",null,[w(" Email "),e(a).provider_id?(n(),d("span",xt," ( "+o(e(l)("Social Login"))+") ",1)):f("",!0)]),u(t("input",{type:"email",class:"input",disabled:!!e(a).provider_id,"onUpdate:modelValue":i[1]||(i[1]=s=>e(a).email=s)},null,8,Ut),[[v,e(a).email]])]),t("div",Ct,[t("label",null,[w(" Password "),e(a).provider_id?(n(),d("span",St," ("+o(e(l)("Social Login"))+") ",1)):f("",!0)]),u(t("input",{type:"password",class:"input",disabled:!!e(a).provider_id,"onUpdate:modelValue":i[2]||(i[2]=s=>e(a).password=s)},null,8,Vt),[[v,e(a).password]])]),t("div",At,[t("label",Mt,o(e(l)("Plan")),1),u(t("select",{"onUpdate:modelValue":i[3]||(i[3]=s=>e(a).plan_id=s),class:"select"},[Dt,(n(!0),d(m,null,h(_.plans,s=>(n(),d("option",{value:s.id,key:s.id},o(s.title)+" "+o(e(C)(s.price)),9,Pt))),128))],512),[[y,e(a).plan_id]])]),t("div",$t,[t("label",Yt,o(e(l)("Payment Gateway")),1),u(t("select",{"onUpdate:modelValue":i[4]||(i[4]=s=>e(a).gateway_id=s),class:"select"},[Nt,(n(!0),d(m,null,h(_.gateways,s=>(n(),d("option",{value:s.id,key:s.id},o(s.name),9,Et))),128))],512),[[y,e(a).gateway_id]])]),e(a).gateway_id?(n(),d("div",It,[t("label",Lt,o(e(l)("Payment Status")),1),u(t("select",{"onUpdate:modelValue":i[5]||(i[5]=s=>e(a).payment_status=s),class:"select"},[(n(),d(m,null,h([1,2,0],s=>t("option",{value:s,key:s},o(s==1?"Paid":s==2?"Pending":"Rejected"),9,Bt)),64))],512),[[y,e(a).payment_status]])])):f("",!0)]),t("div",Tt,[t("div",jt,[t("button",Ft,[t("span",null,o(e(l)("Close")),1)]),c(G,{classes:"btn btn-primary w-full",processing:e(a).processing,"btn-text":e(l)("Save Changes")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{es as default};
