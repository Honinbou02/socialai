import{m as p,T as ae,y as le,p as l,l as ne,h as ie,o as i,c as u,a as Y,j as z,u as c,b as t,t as m,F as y,r as K,d as C,v as S,W as ue,g as de,n as $,k as q,i as ce,e as v,a3 as me,O as pe}from"./app-eeb1ee89.js";import{_ as fe}from"./UserLayout-3d8e0176.js";import{_ as ge}from"./PageHeader-8760edd0.js";import{u as ve,_ as be}from"./Modal-3fa6cd10.js";import{f as ye}from"./fabric-3f116add.js";import{s as he}from"./sharedComposable-624eb874.js";import{t as xe}from"./toastComposable-88b306f2.js";import"./dropdown-45d66330.js";import"./actionModalComposable-f268749a.js";const _e=t("div",{class:"flex justify-center"},[t("div",{class:"half-circle-spinner"},[t("div",{class:"circle circle-1"}),t("div",{class:"circle circle-2"})])],-1),we={class:"mt-6 text-center"},ke={class:"container flex-grow p-4 sm:p-6"},Ce={class:"m-auto max-w-6xl rounded-2xl border pb-3 shadow-lg dark:border-gray-800"},Se={class:"card mb-5 flex items-center justify-between rounded-t-2xl p-4 dark:border-gray-700"},Ie={class:"flex items-center"},Ne=t("div",{class:"mr-4 flex h-11 w-11 flex-shrink-0 items-center justify-center rounded-xl bg-emerald-400 bg-opacity-10 text-emerald-500"},[t("i",{class:"bx bx-flag text-2xl"})],-1),Be={class:"mr-1"},Le={class:"mb-20 space-y-5"},Ue={class:"flex gap-x-3 group-[.user]:flex-row-reverse"},We={class:"avatar avatar-circle avatar-sm shrink-0"},$e=["src"],je=["src"],Me={key:0,class:"hollow-dots-spinner"},Oe=t("div",{class:"dot"},null,-1),Re=t("div",{class:"dot"},null,-1),Te=t("div",{class:"dot"},null,-1),Ae=[Oe,Re,Te],Ve={key:0,class:"w-full space-x-2 border-t border-gray-600 pt-3"},Ee={key:1,class:"w-full border-t border-gray-600 pt-3"},Fe={key:0,class:"w-full space-x-2 border-t border-gray-600 pt-3"},De={key:1,class:"w-full border-t border-gray-600 pt-3"},Pe={class:"grid grid-cols-2 gap-x-4"},Qe={class:"label mb-1"},Je={class:"flex items-center gap-x-2"},Ye={class:"h-9 w-10 overflow-hidden rounded-md"},ze={class:"label mb-1"},Ke={class:"flex items-center gap-x-2"},qe={class:"h-9 w-10 overflow-hidden rounded-md"},Ge={class:"flex flex-wrap items-center gap-2"},He=["onClick"],Xe=["disabled"],Ze={class:"flex items-center gap-2 p-4 pb-2"},et={class:"relative flex w-full items-center"},tt=["disabled"],ot=["disabled"],st={key:0,class:"looping-rhombuses-spinner"},rt=t("div",{class:"rhombus bg-white"},null,-1),at=t("div",{class:"rhombus bg-white"},null,-1),lt=t("div",{class:"rhombus bg-white"},null,-1),nt=[rt,at,lt],it={key:1,class:"bx bx-microphone text-lg"},ut=["disabled"],dt=t("i",{class:"bx bx-send text-lg"},null,-1),ct=[dt],mt={class:"pb-2 pl-6 text-xs"},pt=de({layout:fe}),kt=Object.assign(pt,{__name:"Create",props:["segments","buttons","categories"],setup(j){const G=j,{countWordsAndChars:M}=he(),H=p(!1),h=(()=>{try{const o=window.SpeechRecognition||window.webkitSpeechRecognition;if(o){H.value=!0;const e=new o;return e.continuous=!0,e.interimResults=!0,e.lang="en-US",e}return null}catch{return console.warn("Speech recognition not supported in this browser"),null}})(),I=p(!1),A=p(!1),N=ve(),d=ae({name:"",description:"",colors:{},logo:"",categories:[]});let B=null;const O=p(null),f=p(0),V=p(200),g=p(""),a=p({hasImage:!1,hasColor:!1,primaryColor:"#ffffff",secondaryColor:"#000000",isBase64:!1}),b=p([]),w=p(!1),R=le(()=>f.value>3),X=[{order:1,text:l("Welcome to the brand setup! To optimize content for your brand, we need some?")},{order:2,text:l("Firstly, what's the exact name of your brand?")},{order:3,text:l("Great! Now, can you provide a detailed description of your brand? Think about the main product or service you offer, who your primary customers are, and what sets you apart from others.")},{order:4,text:l("A visual identity starts with a logo. If you have a logo, feel free to share it, or we'll begin with a temporary placeholder logo.")},{order:5,text:l("Are primary and secondary colors already on your mind for your brand? If not, don't worry. We'll generate it for you.")},{order:6,text:l("What type of brand do you have?")},{order:7,text:l("Please wait.....")}],E=["Let us help you create a brand that is authentic, memorable, and true to yourself.","We're here to help you transform your vision into a reality.","Your personal brand is your most valuable asset.","Your personal brand is the foundation of your business. Build it wisely."],F=p("We're here to help you transform your vision into a reality."),L=p(0),D=()=>{O.value.scrollTop=O.value.scrollHeight},Z=()=>{if(!h){xe.warning("Speech recognition is not supported in your browser");return}I.value=!I.value,I.value?h.start():h.stop()},P=o=>X.find(e=>e.order===o);function U(o,e=!0,n=!1){w.value=!0,b.value.push({order:null,message:"",isBot:e,loading:!0,isError:n}),setTimeout(async()=>{const s=b.value.length-1;b.value[s].loading=!1,b.value[s].message=o,b.value[s].order=f.value,w.value=!1,D()},V.value)}function Q(o){const e=P(o);setTimeout(()=>U(e.text,!0),500),f.value=o}ne(()=>{U(P(1).text,!0),setTimeout(()=>Q(2),V.value),h&&(h.onresult=o=>{const e=Array.from(o.results).map(n=>n[0]).map(n=>n.transcript).join("");A.value=e},h.onspeechend=()=>{g.value+=A.value}),B=new ye.fabric.StaticCanvas});const x=(o,e=!1)=>{g.value="";const n={2:["name",1,10,l("Sorry, Make it a minimum of 1 and a maximum of 10 words. What's the exact name of your brand?")],3:["description",20,100,l("Sorry, Make it a minimum of 20 and a maximum of 100 words. What does your company do? Who are your customers? What are your products or services?")]};if(b.value.push({order:null,message:o,isBot:!1,loading:!1,isError:!1,isFile:e}),D(),f.value===2||f.value===3){const[s,k,r,_]=n[f.value];if(M(o).words>r||M(o).words<k){U(_,!0,!0);return}d[s]=o}Q(f.value+1)},T=(o,e=!1)=>{e?d.logo="/assets/images/brand.png":d.logo=o.target.files[0],x(d.logo,!0)},J=()=>{if(a.value.hasColor){const o={primary:a.value.primaryColor,secondary:a.value.secondaryColor};d.colors=o,x(`${a.value.primaryColor} ${a.value.secondaryColor}`)}else x("AI Will generate colors for you.")},ee=o=>{if(d.categories.includes(o)){const e=d.categories.findIndex(n=>n===o);d.categories.splice(e,1)}else d.categories.push(o)},te=async o=>new Promise(e=>{let n=JSON.parse(o).objects;for(let r of n)if(r.id=="slogan"&&(r.text=d.name??"Name"),r.type==="i-text"&&r.left<51){let _;r.left<50&&(_=Math.abs(r.left+50)),r.left<0&&(_=Math.abs(r.left+100)),r.left+=_}let s=JSON.parse(o);s.objects=n;let k=JSON.stringify(s);B.loadFromJSON(k,function(){B.renderAll(),d.logo=B.toDataURL({width:500,height:500}),e()})}),oe=async()=>{N.open("brand");let o=null;if(!(d.logo instanceof File))try{o=(await me.get(route("api-brand-logo",{categories:d.categories}))).data.logo,o&&(await te(o.canvas),a.value.isBase64=!0)}catch{o=null}setInterval(()=>{F.value=E[L.value],L.value++,L.value===E.length&&(L.value=0)},4e3),pe.post(route("user.brand.store"),{form:d,actions:a.value},{onSuccess:()=>N.close(),onError:e=>{const n=(e==null?void 0:e.e)||"Something went wrong..";N.close(),setTimeout(()=>U(n,!0,!0),500)}})},se=()=>{let o="";d.categories.forEach(e=>{const n=G.categories.find(s=>s.id===e);n&&(o+=n.title+", ")}),x(o),oe()},re=o=>URL.createObjectURL(o),W=(o,e)=>o.order&&o.order===e&&o.order===f.value;return(o,e)=>{const n=ie("Link");return i(),u(y,null,[Y(be,{state:c(N).states.brand,"backdrop-close":!1,"close-btn":!1,"bg-blur":!0,"bg-color":"bg-transparent"},{default:z(()=>[_e,t("p",we,m(F.value),1)]),_:1},8,["state"]),t("main",ke,[Y(ge,{title:"Brand Create",buttons:j.buttons},null,8,["buttons"]),t("div",Ce,[t("div",Se,[t("div",Ie,[Ne,t("h5",Be,m(c(l)("Create New Brand")),1)])]),t("div",{class:"styled-scrollbar h-[calc(100vh-23rem)] overflow-y-auto p-5 pt-0",ref_key:"chatContainer",ref:O},[t("ul",Le,[(i(!0),u(y,null,K(b.value,(s,k)=>(i(),u("li",{class:$(["group",s.isBot?"":"user"]),key:k},[t("div",Ue,[t("div",We,[t("img",{class:"avatar-img",src:"https://ui-avatars.com/api/?name=user",alt:"profile-img"},null,8,$e)]),t("div",{class:$(["flex max-w-2xl flex-col items-start gap-y-2 rounded-primary rounded-tl-none p-3 group-[.user]:items-end group-[.user]:rounded-tl-primary group-[.user]:rounded-tr-none group-[.user]:bg-primary-500",[s.loading?"":"bg-slate-100 dark:bg-slate-700",s.isError&&!s.loading?"border border-red-500":""]])},[s.isFile&&!s.isBot?(i(),u("img",{key:0,class:"w-40",src:a.value.hasImage?re(s.message):"/assets/images/brand.png",alt:"logo"},null,8,je)):(i(),u(y,{key:1},[s.loading?(i(),u("div",Me,Ae)):(i(),u("p",{key:1,class:$(["group-[.user]:text-slate-100",s.isError?"text-red-500":"text-slate-600 dark:text-slate-300"])},[q(m(s.message)+" ",1),W(s,7)&&s.isError?(i(),ce(n,{key:0,href:o.route("user.brand.create"),class:"btn btn-outline-danger btn-xs mt-3 block max-w-min"},{default:z(()=>[q(m(c(l)("Reset")),1)]),_:1},8,["href"])):v("",!0)],2))],64)),W(s,4)?(i(),u(y,{key:2},[a.value.hasImage?v("",!0):(i(),u("div",Ve,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=r=>a.value.hasImage=!0)},m(c(l)("Yes, I have")),1),t("button",{class:"btn btn-outline-primary",onClick:e[1]||(e[1]=()=>{a.value.hasImage=!1,T(o.e,!0)})},m(c(l)("Please generate for me")),1)])),a.value.hasImage?(i(),u("div",Ee,[t("input",{class:"input",accept:"image/*",onInput:T,type:"file",name:"file"},null,32),t("button",{class:"btn btn-outline-primary mt-3",onClick:e[2]||(e[2]=()=>{a.value.hasImage=!1,T(o.e,!0)})},m(c(l)("No, I'll use a placeholder for now")),1)])):v("",!0)],64)):v("",!0),W(s,5)?(i(),u(y,{key:3},[a.value.hasColor?v("",!0):(i(),u("div",Fe,[t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=r=>a.value.hasColor=!0)},m(c(l)("Yes, I have")),1),t("button",{class:"btn btn-outline-primary",onClick:e[4]||(e[4]=()=>{a.value.hasColor=!1,J()})},m(c(l)("Not now, let AI generate it for me")),1)])),a.value.hasColor?(i(),u("div",De,[t("div",Pe,[t("div",null,[t("label",Qe,m(c(l)("Primary Color")),1),t("div",Je,[t("div",Ye,[C(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.primaryColor=r),class:"h-24 w-24 -translate-x-5 -translate-y-4 rounded-xl bg-transparent text-sm text-slate-700 outline-none placeholder:text-slate-400 focus:ring-0 focus:ring-primary-500 dark:text-slate-200",type:"color",name:"file"},null,512),[[S,a.value.primaryColor]])]),C(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=r=>a.value.primaryColor=r),class:"input"},null,512),[[S,a.value.primaryColor]])])]),t("div",null,[t("label",ze,m(c(l)("Secondary Color")),1),t("div",Ke,[t("div",qe,[C(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>a.value.secondaryColor=r),class:"h-24 w-24 -translate-x-5 -translate-y-4 rounded-xl bg-transparent text-sm text-slate-700 outline-none placeholder:text-slate-400 focus:ring-0 focus:ring-primary-500 dark:text-slate-200",type:"color",name:"file"},null,512),[[S,a.value.secondaryColor]])]),C(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=r=>a.value.secondaryColor=r),class:"input"},null,512),[[S,a.value.secondaryColor]])])])]),t("button",{class:"btn btn-primary mt-3",onClick:J},m(c(l)("Save")),1),t("button",{class:"btn btn-outline-dark ml-3",onClick:e[9]||(e[9]=r=>a.value.hasColor=!1)},m(c(l)("Cancel")),1)])):v("",!0)],64)):v("",!0),W(s,6)?(i(),u(y,{key:4},[t("div",Ge,[(i(!0),u(y,null,K(j.categories,r=>(i(),u("button",{key:r.id,class:$(["btn btn-xs",c(d).categories.includes(r.id)?"btn-primary":"btn-outline-primary"]),onClick:_=>ee(r.id)},m(r.title),11,He))),128))]),t("button",{class:"btn btn-primary mt-3",disabled:c(d).categories<1,onClick:se},m(c(l)("Save")),9,Xe)],64)):v("",!0)],2)])],2))),128))])],512),t("div",Ze,[t("div",et,[C(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>g.value=s),onKeyup:e[11]||(e[11]=ue(s=>x(g.value),["enter"])),disabled:w.value||R.value,type:"text",class:"w-full rounded-full border border-gray-200 bg-transparent px-6 py-4 text-sm text-slate-700 shadow-md outline-none placeholder:text-slate-400 focus:ring-1 focus:ring-primary-400 disabled:cursor-not-allowed dark:border-gray-700 dark:text-slate-200",placeholder:"Write Something"},null,40,tt),[[S,g.value]]),t("button",{disabled:w.value||R.value,class:"btn btn-primary absolute right-1 h-12 w-12 rounded-full",onClick:Z},[I.value?(i(),u("div",st,nt)):(i(),u("i",it))],8,ot)]),t("button",{disabled:w.value||R.value||g.value.length<2,onClick:e[12]||(e[12]=s=>x(g.value)),class:"btn btn-dark h-12 w-12 rounded-full"},ct,8,ut)]),t("p",mt," Words: "+m(c(M)(g.value??"").words),1)])])],64)}}});export{kt as default};
