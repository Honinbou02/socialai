import{G as I,z as N,m as v,T as Y,l as A,o as a,i as S,j as V,d as k,f as E,u as i,b as e,t as p,c as r,r as B,F as w,v as D,a as R,e as x,h as F,q as G,n as U}from"./app-eeb1ee89.js";import{u as O,_ as P}from"./Modal-3fa6cd10.js";import{s as j}from"./sharedComposable-624eb874.js";import{t as $}from"./toastComposable-88b306f2.js";import{_ as W}from"./HollowDotsSpinner-3fa22236.js";import{_ as L}from"./InputFieldError-3a343586.js";import{h as q}from"./moment-a9aaa855.js";const C=I({status:"",message:"",checkPlan(t,f){var b,u;const{authUser:c}=j();if(!c.value.plan_data||!c.value.will_expire){this.status="danger",this.message="You have not purchased a plan.";return}if(new Date(c.value.will_expire)<new Date){this.status="danger",this.message="Your plan has expired. Please renew your plan!";return}const m=(u=(b=c.value)==null?void 0:b.plan_data[t])==null?void 0:u.value;if(m===-1){this.status="success";return}typeof m=="boolean"&&(m?this.status="success":(this.status="danger",this.message="The feature is not available in your plan. Please upgrade your plan.")),m!==-1&&f>=m?(this.status="danger",this.message=`You have reached your ${t} limit. Please upgrade your plan.`):this.status="success"}}),H={value:"",selected:"",disabled:""},J=["value"],Q={class:"my-4 rounded border border-gray-600 p-3"},X={key:0,class:"group relative h-20 max-w-max"},Z=["src"],K=e("i",{class:"bx bx-x text-xl"},null,-1),ee=[K],te={class:"flex items-center justify-between"},se={class:"space-y-3"},ne={key:0,class:"looping-rhombuses-spinner ml-1 mr-3 scale-75"},ae=e("div",{class:"rhombus bg-primary-600"},null,-1),oe=e("div",{class:"rhombus bg-primary-600"},null,-1),ie=e("div",{class:"rhombus bg-primary-600"},null,-1),re=[ae,oe,ie],le={key:1,class:"bx bx-microphone"},de=e("i",{class:"bx bx-upload"},null,-1),ce=["disabled"],ue=e("i",{class:"bx bx-paper-plane"},null,-1),Te={__name:"ContentCreateModal",props:["totalBrandPost","brands","brand_uuid"],emits:["action"],setup(t,{emit:f}){const c=t,y=O(),{countWordsAndChars:m}=j(),{getState:b}=N(y),u=v(!1),d=v(!1),g=v(null),_=v(!1),s=Y({brand_id:"",title:"",input:"",image:""}),h=(()=>{try{const l=window.SpeechRecognition||window.webkitSpeechRecognition;if(l){_.value=!0;const n=new l;return n.continuous=!0,n.interimResults=!0,n.lang="en-US",n}return null}catch{return console.warn("Speech recognition not supported in this browser"),null}})();A(()=>{h&&(h.onresult=l=>{const n=Array.from(l.results).map(o=>o[0]).map(o=>o.transcript).join("");d.value=n},h.onspeechend=()=>{s.input+=d.value}),c.brand_uuid&&(s.brand_id=c.brands.find(l=>l.uuid==c.brand_uuid).id)});const z=()=>{if(!h){$.warning("Speech recognition is not supported in your browser");return}u.value=!u.value,u.value?h.start():h.stop()},M=l=>URL.createObjectURL(l),T=()=>{if(C.checkPlan("posts",c.totalBrandPost),C.status==="danger")return $.danger(C.message);if(s.input&&m(s.input).words>200){$.danger("Maximum words allowed is 200");return}s.post(route("user.brand-posts.store"),{preserveState:!0,onSuccess:()=>y.close()})};return(l,n)=>(a(),S(P,{state:i(b)("createContent"),"header-state":!0,"header-title":"Description"},{default:V(()=>[k(e("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>i(s).brand_id=o),class:"select mt-3"},[e("option",H,p(l.trans("Select Brand")),1),(a(!0),r(w,null,B(t.brands,o=>(a(),r("option",{value:o.id,key:o.id},p(o.name),9,J))),128))],512),[[E,i(s).brand_id]]),k(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=o=>i(s).title=o),class:"input mt-3",placeholder:"Title"},null,512),[[D,i(s).title]]),R(L,{message:i(s).errors.title},null,8,["message"]),e("div",Q,[k(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=o=>i(s).input=o),class:"textarea styled-scrollbar max-h-48 min-h-[12rem] resize-none border-none p-0 focus:ring-0",placeholder:"Write something"},null,512),[[D,i(s).input]]),R(L,{message:i(s).errors.input},null,8,["message"]),i(s).image?(a(),r("div",X,[e("img",{class:"h-full rounded-md",src:M(i(s).image),alt:"logo"},null,8,Z),e("button",{onClick:n[3]||(n[3]=o=>i(s).image=null),class:"btn btn-dark btn-xs invisible absolute -right-2 -top-2 h-5 w-5 rounded-full group-hover:visible"},ee)])):x("",!0)]),e("div",te,[e("div",se,[e("button",{type:"button",class:"btn btn-outline-primary mr-3",onClick:z},[u.value?(a(),r("div",ne,re)):(a(),r("i",le)),e("span",null,p(l.trans("Voice Typing")),1)]),e("input",{ref_key:"fileInput",ref:g,onInput:n[4]||(n[4]=o=>i(s).image=o.target.files[0]),accept:"image/*",type:"file",hidden:""},null,544),e("button",{type:"button",onClick:n[5]||(n[5]=o=>g.value.click()),class:"btn btn-dark"},[de,e("span",null,p(l.trans("Upload Image")),1)])]),e("button",{onClick:T,disabled:i(s).processing,type:"button",class:"btn btn-primary whitespace-nowrap"},[i(s).processing?(a(),S(W,{key:0,class:"flex items-center justify-center",dotClass:"dot-white"})):(a(),r(w,{key:1},[ue,e("span",null,p(l.trans("Generate Post")),1)],64))],8,ce)])]),_:1},8,["state"]))}},me={class:"flex h-[17rem] w-full items-center justify-center overflow-hidden rounded-2xl"},pe={key:0,alt:"media"},be={key:1,class:"bx bx-image text-9xl text-secondary-700"},he={key:2,class:"bx bx-video text-9xl text-secondary-700"},ge={key:3,class:"bx bx-file text-9xl text-secondary-700"},xe={class:"border-y border-gray-200 px-4 py-2 dark:border-gray-700"},fe={class:"-mb-2 flex items-center justify-between"},ye={class:"font-semibold"},_e={class:"text-xs text-gray-500"},ve={class:"text-gray-400"},ke={class:"flex items-center justify-between px-4 pt-3"},we={class:"flex h-full items-center gap-1"},$e=["src","title"],Ce={key:0,class:"bx bx-file-blank mr-px text-base"},Se={key:1,class:"bx bx-check-circle mr-px text-base"},je={key:2,class:"bx bx-calendar mr-px text-base"},De={class:"text-xs font-bold capitalize"},Ie={__name:"PostCard",props:{content:{type:Object,default:{}}},setup(t){const{textExcerpt:f}=j();return(c,y)=>{const m=F("Link"),b=G("lazy");return a(),S(m,{href:c.route("user.publish",t.content.uuid),class:"flex h-96 min-w-[18rem] flex-col rounded-2xl border border-gray-50 shadow-md dark:border-gray-600 dark:bg-[#0f172a7e]"},{default:V(()=>{var u;return[e("div",me,[t.content.media.type==="image"&&t.content.media.url?k((a(),r("img",pe,null,512)),[[b,t.content.media.url]]):t.content.media.type==="image"&&t.content.media.url===null?(a(),r("i",be)):t.content.media.type==="video"?(a(),r("i",he)):(a(),r("i",ge))]),e("div",xe,[e("div",fe,[e("p",ye,p(i(f)(t.content.title,24)),1),e("p",_e,p(t.content.created_at_diff),1)]),e("small",ve,p((u=t.content.brand)==null?void 0:u.name),1)]),e("div",ke,[e("div",we,[(a(!0),r(w,null,B(t.content.platforms??[],d=>{var g,_,s;return a(),r(w,{key:d.platform},[["published","failed"].includes(d.status)?(a(),r("img",{key:0,class:U(["w-6 rounded-md border p-1",{"border-red-600 bg-red-50 ":d.published_at==null,"border-green-600 bg-green-50":d.published_at!=null}]),src:`/assets/svg/${d.platform}.svg`,title:d.published_at?"published "+i(q)(d.published_at).fromNow():((_=(g=d.data)==null?void 0:g.message)==null?void 0:_.message)??((s=d.data)==null?void 0:s.message)},null,10,$e)):x("",!0)],64)}),128))]),e("div",{class:U(["badge scale-90 border dark:bg-secondary-800",{"border-gray-300 bg-red-50  text-gray-600 ":t.content.status=="draft","border-orange-300 bg-orange-50  text-orange-600":t.content.status=="scheduled","border-green-300 bg-green-50  text-green-600":t.content.status=="published"}])},[t.content.status=="draft"?(a(),r("i",Ce)):x("",!0),t.content.status=="published"?(a(),r("i",Se)):x("",!0),t.content.status=="scheduled"?(a(),r("i",je)):x("",!0),e("span",De,p(t.content.status),1)],2)])]}),_:1},8,["href"])}}};export{Te as _,Ie as a};
