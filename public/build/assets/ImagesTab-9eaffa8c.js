import{z,m as v,q as T,o,c as a,b as l,F as c,r as u,u as e,e as i,a as _,d as m,v as V,t as A,n as f}from"./app-eeb1ee89.js";import{_ as F}from"./CreatePostCard-5225123e.js";import{_ as N}from"./HollowDotsSpinner-3fa22236.js";import{_ as P}from"./IntersectionObserver-26335b66.js";import{u as j}from"./publishStore-39b995a4.js";import{u as B}from"./publishAssetStore-6e2b45c9.js";import"./sharedComposable-624eb874.js";import"./toastComposable-88b306f2.js";import"./actionModalComposable-f268749a.js";const D={class:"grid max-w-max grid-cols-1 rounded-xl bg-secondary-200/50 p-1 dark:bg-secondary-900 sm:grid-cols-3 lg:flex-row"},Q=["onClick"],U={key:0,class:"mb-6 mt-2 flex flex-wrap gap-4 border-b pb-5 dark:border-gray-700"},L=l("label",{class:"label col-span-full w-full font-semibold"},"Selected Images",-1),q={class:"h-full w-full object-cover",alt:"image"},E=["onClick"],G=l("i",{class:"bx bx-trash text-xs"},null,-1),H=[G],O={class:"mt-3 grid grid-cols-2 gap-4 overflow-y-auto md:grid-cols-3"},R=["onClick"],J={class:"h-full w-full object-contain",alt:""},K=l("label",{class:"label mb-1 mt-4"},"Search",-1),W={class:"mb-5 flex gap-x-2"},X=["disabled"],Y=l("i",{class:"bx bx-search-alt"},null,-1),Z=[Y],ee={key:0,class:"flex justify-center"},te={key:1,class:"grid grid-cols-3 gap-4 overflow-y-auto"},se=["onClick"],oe={class:"h-full w-full object-cover",alt:""},ae={key:2,class:"text-center"},le=["disabled"],re={key:0,class:"my-1.5 mr-px h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ne=l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ie=l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),de=[ne,ie],ce={key:1,class:"bx bx-refresh mt-0.5 text-2xl"},ue=l("span",null,"Generate",-1),me={class:"grid grid-cols-3 gap-4 overflow-y-auto"},ge=["onClick"],pe={class:"h-full w-full object-cover",alt:""},he={key:0,class:"text-center"},Pe={__name:"ImagesTab",props:["uploadedAssetImages","generatedAssetImages"],setup(_e){const r=j(),t=B(),{getImagesTabState:g}=z(r),y=v(null),S=v(null),M=v(null);function $(b){const n=r.getActivePlatformContent("media").indexOf(b);n>-1&&r.getActivePlatformContent("media").splice(n,1)}return(b,n)=>{var k,w,x,I,C;const p=T("lazy");return o(),a(c,null,[l("div",D,[(o(!0),a(c,null,u(e(r).assetTabs,s=>(o(),a("button",{key:s,class:f(["btn px-12 py-2 capitalize 2xl:px-14",{"btn-primary":e(g)(s)}]),onClick:d=>e(r).setImagesTab(s)},A(s),11,Q))),128))]),e(r).getActivePlatformContent("media_type")=="image"&&((k=e(r).getActivePlatformContent("media"))==null?void 0:k.length)>0?(o(),a("div",U,[L,(o(!0),a(c,null,u(e(r).getActivePlatformContent("media")||[],s=>(o(),a("div",{key:s,class:"relative h-24 w-24 overflow-hidden rounded-lg"},[m(l("img",q,null,512),[[p,s]]),l("button",{onClick:d=>$(s),type:"button",class:"btn btn-sm btn-danger absolute right-1 top-1 z-50 h-6 w-6 rounded-full"},H,8,E)]))),128))])):i("",!0),e(g)("uploads")?(o(),a(c,{key:1},[l("div",O,[l("input",{ref_key:"assetImageInput",ref:y,onInput:n[0]||(n[0]=s=>e(t).submitAsset(s,"image")),accept:"image/*",type:"file",hidden:""},null,544),_(F,{onAction:n[1]||(n[1]=s=>y.value.click()),percentage:e(t).assetUploadProgress,classes:"h-44",text:"Upload New"},null,8,["percentage"]),((w=e(t).assets.uploadedImages)==null?void 0:w.data.length)>0?(o(!0),a(c,{key:0},u(e(t).assets.uploadedImages.data,(s,d)=>{var h;return o(),a("div",{onClick:fe=>e(r).setPlatformMedia(s.path,"uploads"),key:d,class:f([{"border-2 border-primary-500 shadow shadow-primary-500":(h=e(r).getActivePlatformContent("media"))==null?void 0:h.includes(s.path)},"h-44 overflow-hidden rounded-lg"])},[m(l("img",J,null,512),[[p,s.path]])],10,R)}),128)):i("",!0)]),_(P,{"target-view":S.value,"observer-condition":e(t).assets.uploadedImages.loadMore,"after-intersection":()=>e(t).loadMoreAssets("uploaded","Images"),loader:e(t).assets.loading},null,8,["target-view","observer-condition","after-intersection","loader"])],64)):i("",!0),e(g)("stock")?(o(),a(c,{key:2},[K,l("div",W,[m(l("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=s=>e(t).imageSearchQuery=s),class:"input",placeholder:"Search images.."},null,512),[[V,e(t).imageSearchQuery]]),l("button",{disabled:e(t).imageSearchQuery.length<2,type:"button",onClick:n[3]||(n[3]=(...s)=>e(t).stockImageSearch&&e(t).stockImageSearch(...s)),class:"btn btn-soft-primary text-xl"},Z,8,X)]),e(t).loading.stockImages?(o(),a("div",ee,[_(N)])):i("",!0),!e(t).loading.stockImages&&((x=e(t).stockImages)==null?void 0:x.length)>0?(o(),a("div",te,[(o(!0),a(c,null,u(e(t).stockImages,s=>{var d;return o(),a("div",{key:s.id,onClick:h=>e(r).setPlatformMedia(s.urls.full,"stock"),class:f([{"border-2 border-primary-500 shadow shadow-primary-500":(d=e(r).getActivePlatformContent("media"))==null?void 0:d.includes(s.urls.full)},"h-44 overflow-hidden rounded-lg"])},[m(l("img",oe,null,512),[[p,s.urls.small]])],10,se)}),128))])):i("",!0),e(t).isStockImagesFetched&&!e(t).loading.stockImages&&((I=e(t).stockImages)==null?void 0:I.length)<1?(o(),a("p",ae,A(b.trans("Nothing Found!")),1)):i("",!0)],64)):i("",!0),e(g)("ai")?(o(),a(c,{key:3},[l("button",{disabled:e(t).loading.aiImages,type:"button",onClick:n[4]||(n[4]=(...s)=>e(t).generateImage&&e(t).generateImage(...s)),class:"btn btn-primary my-3 w-full"},[e(t).loading.aiImages?(o(),a("svg",re,de)):(o(),a("i",ce)),ue],8,le),l("div",me,[((C=e(t).assets.generatedImages)==null?void 0:C.data.length)>0?(o(!0),a(c,{key:0},u(e(t).assets.generatedImages.data,s=>{var d;return o(),a("div",{key:s.path,onClick:h=>e(r).setPlatformMedia(s.path,"ai"),class:f(["h-44 overflow-hidden rounded-lg",{"border-2 border-primary-500 shadow shadow-primary-500":(d=e(r).getActivePlatformContent("media"))==null?void 0:d.includes(s.path)}])},[m(l("img",pe,null,512),[[p,s.path]])],10,ge)}),128)):i("",!0)]),_(P,{"target-view":M.value,"observer-condition":e(t).assets.generatedImages.loadMore,"after-intersection":()=>e(t).loadMoreAssets("generated","Images"),loader:e(t).assets.loading},null,8,["target-view","observer-condition","after-intersection","loader"]),e(t).isAiImageFetched&&!e(t).loading.aiImages&&e(t).aiImages.length<1?(o(),a("p",he," Nothing Found! ")):i("",!0)],64)):i("",!0)],64)}}};export{Pe as default};
